<div class="profile-edit-container">
  <h2>Edit Profile</h2>

  <form [formGroup]="profileForm" (ngSubmit)="onSubmit()">
    <div class="form-group">
      <label for="firstName">First Name</label>
      <input
              id="firstName"
              formControlName="firstName"
              type="text"
              class="form-control"
              placeholder="Enter your first name"
      />
      <small class="error" *ngIf="profileForm.get('firstName')?.invalid && profileForm.get('firstName')?.touched">
        First Name is required.
      </small>
    </div>

    <div class="form-group">
      <label for="lastName">Last Name</label>
      <input
              id="lastName"
              formControlName="lastName"
              type="text"
              class="form-control"
              placeholder="Enter your last name"
      />
      <small class="error" *ngIf="profileForm.get('lastName')?.invalid && profileForm.get('lastName')?.touched">
        Last Name is required.
      </small>
    </div>

    <div class="form-group">
      <label for="email">Email</label>
      <input
              id="email"
              formControlName="email"
              type="email"
              class="form-control"
              placeholder="Enter your email"
      />
      <small class="error" *ngIf="profileForm.get('email')?.invalid && profileForm.get('email')?.touched">
        Please enter a valid email address.
      </small>
    </div>

    <div class="form-group">
      <label for="phone">Phone Number (Optional)</label>
      <input
              id="phone"
              formControlName="phone"
              type="text"
              class="form-control"
              placeholder="Enter your phone number"
      />
    </div>

    <div class="form-group">
      <label >Profile Picture (Optional)</label>
      <input
              #profilePicture
              type="file"
              (change)="onProfilePictureChange($event)"
              class="form-control hidden"
      />
      <div  class="image-preview" (click)="profilePicture.click()">
        @if(profilePictureUploading()){
            <div>Uploading...</div>
        } @else {
        <img [src]="profilePicturePreview()" alt="Profile Picture Preview" style="width: 150px; height: 150px;" />
        }
      </div>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn btn-save">
        Save
      </button>
      <button type="button" routerLink="/" class="btn btn-cancel">
        Cancel
      </button>
    </div>


  </form>
</div>
@if(loading()){
<div class="loading-spinner">
  <p>Saving...</p>
</div>
}
